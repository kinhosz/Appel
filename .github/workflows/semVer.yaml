name: Update version
#on:
#  pull_request_target:
#    types:
#      - closed

on: push

jobs:
  if_merged:
    if: github.event.pull_request.merged == true
    runs-on: ubuntu-latest
    steps:
    - name: Was Merged
      run: |
        @echo Was merged
  
  update_major:
#    needs: if_merged
    if: startsWith(github.ref_name, 'break/')
    runs-on: ubuntu-latest
    steps:
    - name: Setting major version
      run: echo update MAJOR

  update_minor:
#    needs: if_merged
    if: startsWith(github.ref_name, 'feat/')
    runs-on: ubuntu-latest
    steps:
    - name: Setting minor version
      run: echo update minor

  update_patch:
    if: ${{ always() }}
    needs: [update_major, update_minor]
    runs-on: ubuntu-latest
    steps:
    - name: Checking if is major update
      run: |
        is_update_major=${{ needs.update_major.result == 'success' }}

    - name: Checking if is minor update
      run: |
        is_update_minor=${{ needs.update_minor.result == 'success' }}

    - name: skipped if previous versions was setted
      if: ${{ !is_update_major && !is_update_minor }}

    - name: setting patch version
      run: echo update patch
# commit to run action